package com.example.natusaude.activity

import android.content.Intent
import android.os.Bundle
import android.widget.Toast
import androidx.appcompat.app.AppCompatActivity
//import com.example.natusaude.databinding.ActivityCheckuotBinding
import com.example.natusaude.databinding.ActivityCheckuotBinding

class CheckuotActivity : AppCompatActivity() {
package com.example.natusaude.model
package com.example.natusaude.viewModel

import androidx.lifecycle.LiveDatapackage com.example.natusaude.ui.theme

import androidx.compose.ui.graphics.Color

val Purple80 = Color(0xFFD0BCFF)
val PurpleGrey80 = Color(0xFFCCC2DC)
val Pink80 = Color(0xFFEFB8C8)

val Purple40 = Color(0xFF6650a4)
val PurpleGrey40 = Color(0xFF625b71)
val Pink40 = Color(0xFF7D5260)
package com.example.natusaude.ui.theme

import android.app.Activity
import android.os.Build
import androidx.compose.foundation.isSystemInDarkTheme
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.darkColorScheme
import androidx.compose.material3.dynamicDarkColorScheme
import androidx.compose.material3.dynamicLightColorScheme
import androidx.compose.material3.lightColorScheme
import androidx.compose.runtime.Composable
import androidx.compose.ui.platform.LocalContext

private val DarkColorScheme = darkColorScheme(
    primary = Purple80,
    secondary = PurpleGrey80,
    tertiary = Pink80
)

private val LightColorScheme = lightColorScheme(
    primary = Purple40,
    secondary = PurpleGrey40,
    tertiary = Pink40

    /* Other default colors to override
    background = Color(0xFFFFFBFE),
    surface = Color(0xFFFFFBFE),
    onPrimary = Color.White,
    onSecondary = Color.White,
    onTertiary = Color.White,
    onBackground = Color(0xFF1C1B1F),
    onSurface = Color(0xFF1C1B1F),
    */
)

@Composable
fun NatusaudeTheme(
    darkTheme: Boolean = isSystemInDarkTheme(),
    // Dynamic color is available on Android 12+
    dynamicColor: Boolean = true,
    content: @Composable () -> Unit
) {
    val colorScheme = when {
        dynamicColor && Build.VERSION.SDK_INT >= Build.VERSION_CODES.S -> {
            val context = LocalContext.current
            if (darkTheme) dynamicDarkColorScheme(context) else dynamicLightColorScheme(context)
        }

        darkTheme -> DarkColorScheme
        else -> LightColorScheme
    }

    MaterialTheme(
        colorScheme = colorScheme,
        typography = Typography,
        content = content
    )
}
package com.example.natusaude.ui.theme

import androidx.compose.material3.Typography
import androidx.compose.ui.text.TextStyle
import androidx.compose.ui.text.font.FontFamily
import androidx.compose.ui.text.font.FontWeight
import androidx.compose.ui.unit.sp

// Set of Material typography styles to start with
val Typography = Typography(
    bodyLarge = TextStyle(
        fontFamily = FontFamily.Default,
        fontWeight = FontWeight.Normal,
        fontSize = 16.sp,
        lineHeight = 24.sp,
        letterSpacing = 0.5.sp
    )
    /* Other default text styles to override
    titleLarge = TextStyle(
        fontFamily = FontFamily.Default,
        fontWeight = FontWeight.Normal,
        fontSize = 22.sp,
        lineHeight = 28.sp,
        letterSpacing = 0.sp
    ),
    labelSmall = TextStyle(
        fontFamily = FontFamily.Default,
        fontWeight = FontWeight.Medium,
        fontSize = 11.sp,
        lineHeight = 16.sp,
        letterSpacing = 0.5.sp
    )
    */
)
import androidx.lifecycle.MutableLiveData
import androidx.lifecycle.ViewModel
import com.example.natusaude.model.itensModel

class DetailViewModel : ViewModel() {
	private val _item = MutableLiveData<itensModel>()
	val item: LiveData<itensModel> get() = _item

	private val _selectdSize = MutableLiveData<Int>()

	val selectedSize: LiveData<Int> get() = _selectdSize

	fun setItem(item: itensModel) {
		_item.value = item
	}

	fun updateSelectedSize(index: Int) {
		_selectdSize.value = index

	}
}
package com.example.natusaude.viewModel

import androidx.lifecycle.LiveData
import androidx.lifecycle.ViewModel
import com.example.natusaude.model.itensModel
import com.example.natusaude.repository.MainRepository

class MainViewModel: ViewModel() {
	private val repository = MainRepository()

	fun loadFiltered(id: Int): LiveData<MutableList<itensModel>> {
		return repository.loadFiltered(id)

	}

}
import android.os.Parcelable
import kotlinx.parcelize.Parcelize

@Parcelize

data class itensModel(
	val title: String ="",
	val descricao: String ="",
	val url: ArrayList<String> = ArrayList(),
	val image: String ="",
	val nome: String =""
):Parcelable

    private lateinit var binding: ActivityCheckuotBinding

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)

        setContentView(binding.root)
        binding.btnVoltar.setOnClickListener {
            finish()
        }
        binding.btnConfirmado.setOnClickListener {
            Toast.makeText(this, "Obrigado, Sua Avaliação foi Registrada!!!", Toast.LENGTH_SHORT)
                .show()

            val intent = Intent(this, MainActivity::class.java)

            startActivity(intent)
            finish()
        }
    }
}
package com.example.natusaude.activity

import android.content.Intent
import android.os.Bundle
import android.view.View
import android.widget.TextView
import androidx.activity.viewModels
import androidx.appcompat.app.AppCompatActivity
import androidx.core.content.ContextCompat
import com.bumptech.glide.Glide
import com.bumptech.glide.load.resource.bitmap.RoundedCorners
import com.bumptech.glide.request.RequestOptions
import com.example.natusaude.R
import com.example.natusaude.databinding.ActivityDetailBinding
import com.example.natusaude.model.itensModel
import com.example.natusaude.viewModel.DetailViewModel

class DetailActivity : AppCompatActivity() {

	private lateinit var binding: ActivityDetailBinding
	private val viewModel: DetailViewModel by viewModels()
	private val sizeButtons: List<View> by lazy { listOf(binding.button1, binding.button2, binding.button3) }

	override fun onCreate(savedInstanceState: Bundle?) {
		super.onCreate(savedInstanceState)
		binding = ActivityDetailBinding.inflate(layoutInflater)
		setContentView(binding.root)

		val item = intent.getParcelableExtra<itensModel>("object")

		item?.let {
			viewModel.setItem(it)
			setupUI() // Corrigido nome do método
			observeSelectedSize() // Começa a observar o tamanho selecionado
		}

		setupSizeButtons()
	}

	private fun setupUI() {
		viewModel.item.observe(this) { item ->
			with(binding) {
				tituloTxt.text = item.title
				descriptionTxt.text = item.descricao
				indicacaoTxt.text = item.nome // ou outro campo apropriado

				Glide.with(this@DetailActivity)
					.load(item.image[0])
					.apply(RequestOptions.bitmapTransform(RoundedCorners(100)))
					.into(imageView2)

				backBtn.setOnClickListener { finish() }

				btnVerificar.setOnClickListener {
					startActivity(Intent(this@DetailActivity, CheckuotActivity::class.java))
				}
			}
		}
	}

	private fun setupSizeButtons() {
		sizeButtons.forEachIndexed { index, button ->
			button.setOnClickListener {
				viewModel.updateSelectedSize(index)
			}
		}
	}

	private fun updateSizeButtonsState(selectedSize: Int) {
		sizeButtons.forEachIndexed { index, button ->
			val backgroundColor =
				if (index == selectedSize) R.drawable.sizebtn1 else R.drawable.fundo_verde_claro

			val textColor =
				if (index == selectedSize) R.color.black else R.color.white

			button.background = ContextCompat.getDrawable(this, backgroundColor)
			if (button is TextView) {
				button.setTextColor(ContextCompat.getColor(this, textColor))
			}
		}
	}

	private fun observeSelectedSize() {
		viewModel.selectedSize.observe(this) { selectedSize ->
			updateSizeButtonsState(selectedSize)
		}
	}
}

package com.example.natusaude.activity

import android.content.Intent
import android.os.Bundle
import androidx.appcompat.app.AppCompatActivity
import com.example.natusaude.databinding.ActivityIntroBinding

class IntroActivity : AppCompatActivity() {

    private lateinit var binding: ActivityIntroBinding

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        binding = ActivityIntroBinding.inflate(layoutInflater)
        setContentView(binding.root)

        // Ação do botão Iniciar
        binding.btnIniciar.setOnClickListener {
            startActivity(Intent(this, MainActivity::class.java))
        }

        // Ação do botão Sair
        binding.btnSair.setOnClickListener {
            val intent = Intent(this, LoginActivity::class.java)
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP or Intent.FLAG_ACTIVITY_NEW_TASK)
            startActivity(intent)
            finish()
        }
    }
}

package com.example.natusaude.activity


import android.content.Intent
import android.os.Bundle
import android.util.Log
import android.view.View
import androidx.activity.viewModels
import androidx.appcompat.app.AppCompatActivity
import androidx.recyclerview.widget.LinearLayoutManager
import com.example.natusaude.viewModel.MainViewModel
import com.example.natusaude.adapter.ListItemAdapter
import com.example.natusaude.R
import com.example.natusaude.databinding.ActivityListBinding

class ListActivity : AppCompatActivity() {

    private val viewModel: MainViewModel by viewModels()

    private lateinit var binding: ActivityListBinding

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)

        binding = ActivityListBinding.inflate(layoutInflater)

        setContentView(binding.root)
        setUI()
        observeData()
    }

    private fun observeData() {
        val categoryId = intent.getIntExtra("id", 0)

        binding.progressBar.visibility = View.VISIBLE

        viewModel.loadFiltered(categoryId).observe(this) { itens ->

            binding.progressBar.visibility = View.GONE

            if (itens.isEmpty()) {
                binding.btnVoltar.visibility = View.VISIBLE

            } else {
                binding.btnPesquisar.visibility = View.GONE

                binding.view.layoutManager =
                    LinearLayoutManager(this, LinearLayoutManager.VERTICAL, false)

                binding.view.adapter = ListItemAdapter(itens)


            }
        }

    }

    private fun setUI() {
        binding.btnVoltar.setOnClickListener { finish() }
        binding.bottomNavigationView.setOnClickListener {
            startActivity(Intent(this, MainActivity::class.java))
        }
    }

    private fun setCategoryDrawable(categoryId: Int): Int {
        return when (categoryId) {
            1 -> R.drawable.medicamento
            2 -> R.drawable.livro
            3 -> R.drawable.empresas
            4 -> R.drawable.local
            5 -> R.drawable.mercado
            6 -> R.drawable.satisfacao
            else -> {
                Log.e("ListActivity", "Invalid category id: $categoryId")
                R.drawable.medicamento
            }

        }

    }
}

package com.example.natusaude.activity

import android.content.Intent
import android.os.Bundle
import android.widget.Toast
import androidx.appcompat.app.AppCompatActivity
import com.example.natusaude.databinding.ActivityLoginBinding

class LoginActivity : AppCompatActivity() {

    private lateinit var binding: ActivityLoginBinding

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        binding = ActivityLoginBinding.inflate(layoutInflater)
        setContentView(binding.root)

        // Ação do botão Entrar
        binding.btnEntrar.setOnClickListener {
            val email = binding.etEmail.text.toString()
            val senha = binding.etSenha.text.toString()

            if (validarLogin(email, senha)) {
                irParaIntro()
            } else {
                Toast.makeText(this, "Email ou senha inválidos", Toast.LENGTH_SHORT).show()
            }
        }

        // Ação do botão Cadastro
        binding.btnCadastro.setOnClickListener {
            val intent = Intent(this, CadastroActivity::class.java)
            startActivity(intent)
        }
    }

    private fun validarLogin(email: String, senha: String): Boolean {
        // Validação básica (será integrado com banco de dados depois)
        return email.isNotEmpty() && senha.isNotEmpty() && email.contains("@")
    }

    private fun irParaIntro() {
        val intent = Intent(this, IntroActivity::class.java)
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP or Intent.FLAG_ACTIVITY_NEW_TASK)
        startActivity(intent)
        finish()
    }
}

package com.example.natusaude.activity


import android.content.Intent
import android.os.Bundle
import androidx.appcompat.app.AppCompatActivity
import com.example.natusaude.R
import com.example.natusaude.databinding.ActivityMainBinding

class MainActivity : AppCompatActivity() {

    private lateinit var binding: ActivityMainBinding

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        binding = ActivityMainBinding.inflate(layoutInflater)
        setContentView(binding.root)

        setupClickListeners()
        setupBottomNavigation()
    }

    private fun setupClickListeners() {
        binding.apply {
            btnFitoterapicos.setOnClickListener { startListActivity(1, "Fitoterápicos") }
            btnGuia.setOnClickListener { startListActivity(2, "Guias") }
            btnEpresas.setOnClickListener { startListActivity(3, "Empresas") }
            btnLojas.setOnClickListener { startListActivity(4, "Lojas") }
            idEpecificos.setOnClickListener { startListActivity(5, "Epecificos") }
            btnAvaliacao.setOnClickListener { startListActivity(6, "Avaliação") }
        }
    }

    private fun setupBottomNavigation() {
        binding.bottomNavigation.setOnItemSelectedListener { menuItem ->
            when (menuItem.itemId) {
                R.id.nav_home -> {
                    val intent = Intent(this@MainActivity, IntroActivity::class.java)
                    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)
                    startActivity(intent)
                    true
                }
                // Outros itens do menu podem ser tratados aqui!
                else -> false
            }
        }
    }

    private fun startListActivity(id: Int, title: String) {
        val intent = Intent(this, ListActivity::class.java)
        intent.putExtra("id", id)
        intent.putExtra("title", title)
        startActivity(intent)
    }
}

package com.example.natusaude.activity

import android.content.Intent
import android.os.Bundle
import android.widget.Button
import android.widget.EditText
import android.widget.Toast
import androidx.appcompat.app.AppCompatActivity
import com.example.natusaude.R

class CadastroActivity : AppCompatActivity() {

    private lateinit var etNome: EditText
    private lateinit var etEmail: EditText
    private lateinit var etSenha: EditText
    private lateinit var etConfirmarSenha: EditText
    private lateinit var btnCadastrar: Button
    private lateinit var btnVoltar: Button

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_cadastro)

        // Inicializar componentes
        etNome = findViewById(R.id.etNome)
        etEmail = findViewById(R.id.etEmail)
        etSenha = findViewById(R.id.etSenha)
        etConfirmarSenha = findViewById(R.id.etConfirmarSenha)
        btnCadastrar = findViewById(R.id.btnCadastrar)
        btnVoltar = findViewById(R.id.btnVoltarCadastro)

        // Ação do botão Cadastrar
        btnCadastrar.setOnClickListener {
            val nome = etNome.text.toString()
            val email = etEmail.text.toString()
            val senha = etSenha.text.toString()
            val confirmarSenha = etConfirmarSenha.text.toString()

            if (validarCadastro(nome, email, senha, confirmarSenha)) {
                Toast.makeText(this, "Cadastro realizado com sucesso!", Toast.LENGTH_SHORT).show()
                voltarParaLogin()
            }
        }

        // Ação do botão Voltar
        btnVoltar.setOnClickListener {
            voltarParaLogin()
        }
    }

    private fun validarCadastro(nome: String, email: String, senha: String, confirmarSenha: String): Boolean {
        return when {
            nome.isEmpty() -> {
                Toast.makeText(this, "Nome é obrigatório", Toast.LENGTH_SHORT).show()
                false
            }
            email.isEmpty() || !email.contains("@") -> {
                Toast.makeText(this, "Email inválido", Toast.LENGTH_SHORT).show()
                false
            }
            senha.isEmpty() || senha.length < 6 -> {
                Toast.makeText(this, "Senha deve ter pelo menos 6 caracteres", Toast.LENGTH_SHORT).show()
                false
            }
            senha != confirmarSenha -> {
                Toast.makeText(this, "Senhas não coincidem", Toast.LENGTH_SHORT).show()
                false
            }
            else -> true
        }
    }

    private fun voltarParaLogin() {
        val intent = Intent(this, LoginActivity::class.java)
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)
        startActivity(intent)
        finish()
    }
}
